<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="style.css" />
        <link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon" />
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"/>
        <meta name="description" content="인공지능을 이용한 건강 습관 만들기">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="naver-site-verification" content="9598d0e884181219be3deac3f06c3a65a3d95562" />
        <meta property="og:url" content="https://faceshapeai.netlify.app/" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="인공지능을 이용한 건강 체크" />
        <meta property="og:description"
            content="인공지능이 얼굴 사진을 분석하고 그 질병의 원인이 될 수 있는 것들에 대한 정보와 개선 방법을 제공합니다." />
        <title>Health AI</title>
        <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5f02d0a9274c4624"></script>
        <!--JQuery latist-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-latest.min.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="#">Health AI Home</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </nav>
        <section class="section">
            <h1 class="title">인공 지능 안면 인식을 통한 건강 체크</h1>
            <h2 class="subtitle">건강은 제일의 재산이다 - 에머슨 -</h2>
        </section>
        <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <div class="file-upload">
            <div class="image-upload-wrap">
                <input class="file-upload-input" type="file" onchange="readURL(this);" accept="image/*"/>
                <div class="drag-text">
                    <img src="img/photo.png" class="mt-5 pt-5 upload">
                    <h3 class="mb-5 pb-5 pt-4  upload-text">버튼을 눌러 얼굴 사진을 선택하거나 파일을 이 곳으로 끌어다 놓으세요.</h3>
                </div>
            </div>
            <div class="file-upload-content">
                <img class="file-upload-image" id="image" src="#" alt="your face image" />
                <div id="loading" class="animated bounce">
                    <div class="spinner-border" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    <p class="text-center">인공 지능이 당신의 얼굴을 분석하고 있습니다.</p>
                </div>
                <div class="result-message"></div>
                <div id="label-container" class="d-flex flex-column justify-content-around"></div>
                <br>
                <div class="image-title-wrap">
                    <button type="button p-2" onclick="location.href='index.html'" class="try-again-btn">
                        <span class="try-again-text">다른 사진으로 다시하기</span>
                    </button>
                </div>
            </div>
            <br>
            <p class="tip">더 정확한 결과를 얻고 싶다면 <b>조명을 고려하여 화장하지 않은 정면 사진</b> 으로 다시 테스트 해 보세요!</p>
			<!— Go to www.addthis.com/dashboard to customize your tools —>
            <center><div class="addthis_inline_share_toolbox"></div></center>
        </div>       
        <div id="disqus_thread"></div>
       
        <script>
            /**
             *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
             *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
             */
            /*
                var disqus_config = function () {
                this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                };
            */
            (function () {
                // DON'T EDIT BELOW THIS LINE
                var d = document,
                    s = d.createElement('script');
                s.src = 'https://healthai.disqus.com/embed.js';
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript
            >Please enable JavaScript to view the
            <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script
            src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
            integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
            integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
            crossorigin="anonymous"
        ></script>
        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
        <script>
            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('.image-upload-wrap').hide();
                        $('#loading').show();
                        $('.file-upload-image').attr('src', e.target.result);
                        $('.file-upload-content').show();
                        $('.image-title').html(input.files[0].name);
                    };

                    reader.readAsDataURL(input.files[0]);
                    init().then(() => {
                        predict();
                        $('#loading').hide();
                    });
                } else {
                    removeUpload();
                }
            }

            function removeUpload() {
                $('.file-upload-input').replaceWith($('.file-upload-input').clone());
                $('.file-upload-content').hide();
                $('.image-upload-wrap').show();
            }
            $('.image-upload-wrap').bind('dragover', function () {
                $('.image-upload-wrap').addClass('image-dropping');
            });
            $('.image-upload-wrap').bind('dragleave', function () {
                $('.image-upload-wrap').removeClass('image-dropping');
            });
        </script>
        <script type="text/javascript">
            // More API functions here:
            // https://github.com/googlecreativelab/teachablemachine-community/tree/master/libraries/image

            // the link to your model provided by Teachable Machine export panel
            const URL = 'https://teachablemachine.withgoogle.com/models/j6WGahUlC/';

            let model, labelContainer, maxPredictions;

            // Load the image model
            async function init() {
                const modelURL = URL + 'model.json';
                const metadataURL = URL + 'metadata.json';

                // load the model and metadata
                // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
                // or files from your local hard drive
                // Note: the pose library adds "tmImage" object to your window (window.tmImage)
                model = await tmImage.load(modelURL, metadataURL);
                maxPredictions = 4;

                // append elements to the DOM
                labelContainer = document.getElementById('label-container');
                for (let i = 0; i < maxPredictions; i++) {
                    // and class labels
                    labelContainer.appendChild(document.createElement('div'));
                }
            }

            // run the image through the image model
            async function predict() {
                // predict can take in an image, video or canvas html element
                var image = document.getElementById('image');
                const prediction = await model.predict(image, false);
                prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));

                var resultMessage = "";

                switch (prediction.className) {
                    case '건강한 얼굴':
                        resultMessage = '매일 규칙적인 습관과 운동을 잊지 마세요~!';
                        break;
                    case '검정 얼굴':
                        resultMessage = '말초혈액순환 장애';
                        break;
                    case '누런 얼굴':
                        resultMessage = '빈혈, 간질환 의심';
                        break;
                    case '붉은 얼굴':
                        resultMessage = '협심증, 심근경색 위험';
                        break;
                    case '창백한 얼굴':
                        resultMessage = '기립성 저혈압';
                        break;
                    case '기미와 주근깨':
                        resultMessage = '당분, 기름 때문에 발생';
                        break;
                    case '다크써클':
                        resultMessage = '휴식이 필요합니다!';
                        break;
                    case 'default':
                        resultMessage = 'test';
                        break;
                }

                $('.result-message').html(resultMessage);

                for (let i = 0; i < maxPredictions; i++) {
                    const classPrediction = prediction[i].className + ': ' + Math.round(prediction[i].probability.toFixed(2) * 100) + "%";
                    labelContainer.childNodes[i].innerHTML = classPrediction;
                }
            }
        function show() {
            document.querySelector('#desc').style.display = 'block';
            document.querySelector('#open').style.display = 'none';
        }
        function hide() {
            document.querySelector('#desc').style.display = 'none';
            document.querySelector('#open').style.display = 'block';
        }
        </script>
        <div class="flex flex-row justify-center" style="margin-top: 3vh;">
            <span class="waitingtext1 text-gray-500" style="font-size: 1.5vh; margin-bottom:2vh">
            <i class="fas fa-exclamation-circle"></i>
            본 서비스는 의료 목적으로 사용하실 수 없습니다.
            </span>
        </div>
        <div class="ad-banner">
            <ins class="kakao_ad_area" style="display:none;"
                data-ad-unit    = "DAN-ubguhr7k8yt0"
                data-ad-width   = "320"
                data-ad-height  = "100"></ins>
            <script type="text/javascript" src="//" async></script>
        </div> 
        <footer>
        <div class="border-b" style="margin-bottom: 3vh;"></div>
            <div class="flex flex-col justify-center items-center">
                <span class="text-gray-600 text1">© Health AI 2020. All Rights Reserved. </span>
                <!--쿠팡파트너스 설명문구
                <span class="text-gray-600 text1" style="font-size: 1.4vh;">“파트너스 활동을 통해 일정액의 수수료를 제공받을 수 있음"</span>
                -->
            </div>
        </footer>
    </body>
<!--Copyright (c) 2020 by Aaron Vanston (https://codepen.io/aaronvanston/pen/yNYOXR)

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
-->
</html>